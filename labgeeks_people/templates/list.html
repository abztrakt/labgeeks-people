{% extends 'base.html' %}

{% block pageJS %}
<!--<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.tablesorter.min.js"></script>-->
<script type="text/javascript">

$(function() {
    var nav = $('#nav_container');
    var navHomeY = nav.offset().top;
    var isFixed = false;
    var $w = $(window);
    $w.scroll(function() {
        var scrollTop = $w.scrollTop();
        var shouldBeFixed = scrollTop > navHomeY;
        if (shouldBeFixed && !isFixed && $w.width() > 1370) {
            nav.css({
                position: 'fixed',
                float: 'right',
                right: '5px',
                top: '25px'
            });
            isFixed = true;
        } else if (!shouldBeFixed && isFixed && $w.width() > 1370) {
            nav.css({
                position: 'static',
                top: '100px'
            });
            isFixed = false
        }
    });

    $w.resize(function() {
        if ($w.width() < 1370) {
            nav.css({
                float: 'none',
                top: '0',
                position: 'relative'
            });
        } else if ($w.width() > 1370) {
            nav.css({
                position: 'fixed',
                top: '100px',
                right: '5px',
                float: 'left'
            });
        }
    });

    window.onload = function() {
        if ($w.width() < 1370) {
            nav.css({
                float: 'none',
                position: 'relative'
            });
        } else {
            nav.css({
                float: 'right'
            });
        }
    }
});

</script>
{% endblock %}

{% block content %}

    <div id="nav_container">
        <ul class="nav">
        {% for group in group_list %}
            <li><a href="#{{ group.group_name }}">{{ group.group_name }}</a></li>
        {% endfor %}
        </ul>
    </div>

    <div id="list_wrapper">
        <div class="section">
            <h1>Employee List</h1>
        </div>

        <div id="group_section_wrapper">
            {% for group in group_list %}

            <section class="group_section" id="{{ group.group_name }}">
                <a name="{{ group.group_name }}"></a><h2>{{group.group_name}}</h2>
                <table class="people">
                    <thead>
                        <tr>
                            <th><a href='#'>Profile Picture</a></th>
                            <th><a href='#'>First Name</a></th>
                            {% if view_last_names %}<th><a href='#'>Last Name</a></th>{% endif %}
                            <th><a href='#'>NetID</a></th>
                            <th><a href='#'>Title</a></th>
                            <th></th>
                            <th></th>
                            {% if can_add_review %}<th></th>{% endif %}
                        </tr>
                    </thead>
                    <tbody>
                    {% for user in group.users %}
                        <tr>
                            <td class="profile_picture">
                            {% if user.get_profile.badge_photo %}
                                <img src="{{ user.get_profile.badge_photo.url }}" alt="Profile Picture" />
                            {% elif user.get_profile.staff_photo %}
                                <img src="{{ user.get_profile.staff_photo.url }}" alt="Profile Picture" />
                            {% else %}
                                <img src="/uploads/images/stock_photo.jpg" alt="Profile Picture" />
                            {% endif %}
                            </td>
                            <td>{{ user.first_name }}</td>
                            {% if view_last_names %}<td>{{ user.last_name }}</td>{% endif %}
                            <td>{{ user }}</td>
                            <td>{{ user.get_profile.title }}</td>
                            <td><a href="{% url People-View_Profile user %}"><i class="icon-user"></i><span class="long">Profile</span></a></td>
                            <td><a href="{% url Personal-Timesheet user %}"><i class="icon-list-alt"></i><span class="long">Timesheet</span></a></td>
                            {% if can_add_review%}<td><a href="{% url People-Edit_Reviews user %}"><i class="icon-pencil"></i><span class="long">Create/Edit Review</span></a></td>{% endif %}
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </section>
            {% endfor %}
        </div>
    </div>

{% endblock %}
